# vim: et ts=4 sw=4
def test0 = {
    def argn/ruby = !ruby -e "n = ARGV[0].to_i; args = ARGV[1..]; print args[n];" -- $args;
    def argn = argn/ruby $args;

    def echo_args = !ruby -e r"p ARGV" -- $args;

    argn 0 one two three;
    argn 1 one two three;
    argn 2 one two three;

    let n = 12;
    echo_args 0 one 14 two 309234234 three $n $n $n;
    echo_args $n $n;
    0
}


def test1 = {
    def a = {
        let p = "A";
        !echo $p $args $p;
        0
    }
    def b = {
        let p = "B";
        a $p $args $p;
        0
    }
    def c = {
        let p = "C";
        b $p $args $p;
        0
    }

    def times3 = {
        c $args;
        c $args;
        c $args;
        0
    }

    def say-i-am = !echo am;

    let an = "an";
    let am = say-i-am;
    times3 Hello, I am $an argument.;
    0
}

test1;
0
